using System.Collections;
using System.Collections.Generic;
using UnityEngine;

/// <summary>
/// 룰렛 회전을 제어하는 컨트롤러 클래스 (아이디어 버전)
/// 마우스 왼쪽 클릭으로 룰렛을 회전시키고, 오른쪽 클릭으로 급격한 감속(브레이크) 기능을 제공합니다.
/// 플래그 변수 대신 rotateSpeed 값으로 회전 상태를 관리하는 간단한 버전입니다.
/// </summary>
public class RouletteController_idea : MonoBehaviour
{
    /// <summary>
    /// 룰렛의 현재 회전 속도 (초당 각도)
    /// 0이면 정지 상태, 0보다 크면 회전 중 상태를 나타냅니다.
    /// 매 프레임마다 감소하여 자연스러운 감속 효과를 만듭니다.
    /// </summary>
    public float rotateSpeed = 0f;

    /// <summary>
    /// 게임 시작 시 한 번 호출되는 초기화 메서드
    /// 현재는 사용하지 않지만, 필요시 초기 설정을 여기에 추가할 수 있습니다.
    /// </summary>
    void Start()
    {

    }

    /// <summary>
    /// 매 프레임마다 호출되는 업데이트 메서드
    /// 마우스 입력 감지, 룰렛 회전 처리, 속도 감소 로직을 처리합니다.
    /// </summary>
    void Update()
    {
        // 마우스 왼쪽 버튼 클릭 감지 및 회전 시작 조건 확인
        // 조건: 마우스 왼쪽 클릭 && 현재 회전 속도가 0 (정지 상태)
        // rotateSpeed == 0f로 회전 상태를 확인하여, 회전 중에는 새로운 회전을 시작하지 않습니다.
        if (Input.GetMouseButtonDown(0) && rotateSpeed == 0f)
        {
            // 랜덤한 초기 회전 속도 설정 (15도 ~ 30도 사이의 랜덤 값)
            // 이 값이 클수록 룰렛이 더 오래 회전합니다.
            rotateSpeed = Random.Range(15f, 30f);
        }

        // 마우스 오른쪽 버튼 클릭 감지 (브레이크 기능)
        // 회전 중일 때 오른쪽 버튼을 클릭하면 급격하게 속도를 감소시킵니다.
        if (Input.GetMouseButtonDown(1))
        {
            // 브레이크 작동을 콘솔에 출력 (디버깅 및 피드백용)
            Debug.Log("Breakkkkkkkkkkkkkkk~~~~~~~~~");
            
            // 회전 속도를 현재 속도의 20%로 급격히 감소시킴
            // 0.2를 곱하면 속도가 80% 감소하여 빠르게 정지 효과를 만듭니다.
            // 이는 긴급 정지나 브레이크 기능을 시뮬레이션합니다.
            rotateSpeed *= 0.2f;
        }

        // 매 프레임마다 Z축(화면에 수직인 축)을 기준으로 회전 적용
        // Rotate(x, y, z): 각 축을 기준으로 주어진 각도만큼 회전
        // 현재는 Z축만 회전하므로 룰렛이 평면에서 회전하는 효과를 만듭니다.
        transform.Rotate(0, 0, rotateSpeed);

        // 회전 속도를 매 프레임마다 98.6%로 감소시킴 (1.4% 감소)
        // 이는 마찰력이나 저항을 시뮬레이션하여 자연스러운 감속 효과를 만듭니다.
        // 0.986을 곱하면 점진적으로 속도가 줄어들어 결국 0에 가까워집니다.
        // 이 값이 작을수록 더 빠르게 감속하고, 클수록 더 천천히 감속합니다.
        rotateSpeed *= 0.986f;

        // 회전 속도가 거의 0에 도달했는지 확인 (0.05도 이하)
        // 이 임계값은 룰렛이 거의 정지했다고 판단하는 기준입니다.
        // 매우 작은 값으로 설정하여 부드러운 정지 효과를 만듭니다.
        if (rotateSpeed <= 0.05f)
        {
            // 회전 속도를 완전히 0으로 설정하여 정지
            // 이렇게 하면 다음 클릭 시 새로운 회전을 시작할 수 있습니다.
            rotateSpeed = 0f;
        }
    }
}
